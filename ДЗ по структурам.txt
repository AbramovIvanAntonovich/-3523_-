#include <Windows.h>
#include <iostream>
#include <iomanip>
using namespace std;
struct Student
{
    string surname;
    string name;
    string lastname;
    int grade[4];
    double average=0;
    bool debtor;
};
int main()
{
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);
    cout << "Введите количество студентов:" << endl;
    int N;
    cin >> N;
    if (N > 0)
    {
        Student* student = new Student[N];
        double averageofstudents = 0;
        for (int i = 0;i < N;i++)
        {
            cout << "Введите фамилию " << i + 1 << "го студента:" << endl;
            cin >> student[i].surname;
            cout << "Введите имя: " << endl;
            cin >> student[i].name;
            cout << "Введите отчество:" << endl;
            cin >> student[i].lastname;
            for (int j = 0;j < 4;j++)
            {
                bool check = 0;
                do
                {
                    check = 0;
                    cout << "Оценка за предмет номер " << j + 1 << ":   ";
                    cin >> student[i].grade[j];
                    if ((student[i].grade[j] > 5) || (student[i].grade[j] < 1))
                    {
                        cout << "Оценка студента должна быть не более пяти и не менее единицы!" << endl;
                        check++;
                    }
                } while (check != 0);
                if (student[i].grade[j] < 3)
                    student[i].debtor++;
                student[i].average += (student[i].grade[j] / 4.0);
            }
            averageofstudents += (student[i].average / N);
        }
        cout << "Средний балл каждого студента:" << endl;
        cout<<"Номер"<<setw(11)<<"ФИО"<<setw(15)<<"Балл"<<endl;
        for (int i = 0;i < N;i++)
        {
            cout << setw(2) << i + 1 << setw(18) << student[i].surname << "." << student[i].name[0] << "." << student[i].lastname[0] << "." << setw(5) << student[i].average << endl;
        }
        cout << "Средний балл группы: " <<setw(9)<< averageofstudents << endl;
        cout << "Список студентов у которых средний балл выше среднего балла по группе: " << endl;
        for (int i = 0;i < N;i++)
        {
            if (student[i].average > averageofstudents)
                cout << setw(2)<<i + 1 << setw(18) << student[i].surname << "." << student[i].name[0] << "." << student[i].lastname[0] << "."<<setw(5) << student[i].average << endl;
        }
        cout << "Список должников:" << endl;
        for (int i = 0;i < N;i++)
        {
            if (student[i].debtor == true)
                cout << setw(2) << i + 1 << setw(18) << student[i].surname << "." << student[i].name[0] << "." << student[i].lastname[0] << "." << endl;
        }
        cout << "Список отличников:" << endl;
        for (int i = 0;i < N;i++)
        {
            if (student[i].average == 5)
                cout << setw(2) << i + 1 << setw(18) << student[i].surname << "." << student[i].name[0] << "." << student[i].lastname[0] << "." << setw(5) << student[i].average << endl;
        }
    }
    else
        cout << "Количество студентов не может быть отрицательным или нулевым!" << endl;
}